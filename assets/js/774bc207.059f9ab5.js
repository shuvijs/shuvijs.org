"use strict";(self.webpackChunkshuvi_document=self.webpackChunkshuvi_document||[]).push([[4750],{9613:(e,r,t)=>{t.d(r,{Zo:()=>p,kt:()=>m});var o=t(9496);function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function a(e,r){if(null==e)return{};var t,o,n=function(e,r){if(null==e)return{};var t,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)t=i[o],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)t=i[o],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var l=o.createContext({}),u=function(e){var r=o.useContext(l),t=r;return e&&(t="function"==typeof e?e(r):s(s({},r),e)),t},p=function(e){var r=u(e.components);return o.createElement(l.Provider,{value:r},e.children)},c={inlineCode:"code",wrapper:function(e){var r=e.children;return o.createElement(o.Fragment,{},r)}},d=o.forwardRef((function(e,r){var t=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,p=a(e,["components","mdxType","originalType","parentName"]),d=u(t),m=n,v=d["".concat(l,".").concat(m)]||d[m]||c[m]||i;return t?o.createElement(v,s(s({ref:r},p),{},{components:t})):o.createElement(v,s({ref:r},p))}));function m(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var i=t.length,s=new Array(i);s[0]=d;var a={};for(var l in r)hasOwnProperty.call(r,l)&&(a[l]=r[l]);a.originalType=e,a.mdxType="string"==typeof e?e:n,s[1]=a;for(var u=2;u<i;u++)s[u]=t[u];return o.createElement.apply(null,s)}return o.createElement.apply(null,t)}d.displayName="MDXCreateElement"},281:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>s,default:()=>c,frontMatter:()=>i,metadata:()=>a,toc:()=>u});var o=t(2081),n=(t(9496),t(9613));const i={sidebar_position:2,id:"custom-error",title:"Custom Error"},s=void 0,a={unversionedId:"guides/custom-behaviors/custom-error",id:"guides/custom-behaviors/custom-error",title:"Custom Error",description:"How to Custom Error Page",source:"@site/docs/guides/custom-behaviors/custom-error.md",sourceDirName:"guides/custom-behaviors",slug:"/guides/custom-behaviors/custom-error",permalink:"/shuvijs.org/docs/guides/custom-behaviors/custom-error",draft:!1,editUrl:"https://github.com/shuvijs/shuvijs.org/tree/master/docs/guides/custom-behaviors/custom-error.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,id:"custom-error",title:"Custom Error"},sidebar:"guides",previous:{title:"Custom App",permalink:"/shuvijs.org/docs/guides/custom-behaviors/custom-app"},next:{title:"Custom Server",permalink:"/shuvijs.org/docs/guides/custom-behaviors/custom-server"}},l={},u=[{value:"How to Custom Error Page",id:"how-to-custom-error-page",level:2},{value:"Error Component Props",id:"error-component-props",level:2},{value:"errorCode",id:"errorcode",level:3},{value:"errorDesc",id:"errordesc",level:4},{value:"error",id:"error",level:4}],p={toc:u};function c(e){let{components:r,...t}=e;return(0,n.kt)("wrapper",(0,o.Z)({},p,t,{components:r,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"how-to-custom-error-page"},"How to Custom Error Page"),(0,n.kt)("p",null,"If an error occurred, shuvi render error page. To create a custom error page you can create an ",(0,n.kt)("inlineCode",{parentName:"p"},"src/error.js"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"src/error.jsx"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"src/error.ts")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"src/error.tsx")," file and export a component:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/error.tsx"',title:'"src/error.tsx"'},'import React from "react";\nimport { Link } from "@shuvi/runtime";\n\ntype Props = {\n  errorCode?: number;\n  errorDesc?: string;\n  error?: Error;\n}\n\nexport default ({ errorCode, errorDesc }: Props) => {\n  const [showError, setErrorStatus] = React.useState(false);\n  React.useEffect(() => {\n    setErrorStatus(true);\n  });\n  return (\n    <div style={{ color: "red" }}>\n      { errorCode && <div>{errorCode}</div> }\n      <div id="error">\n        custom error {errorDesc}\n      </div>\n      { error &&\n        <div>\n          <div>Error Detail</div>\n          {error.stack}\n        </div> \n      }\n      <br />\n      <Link id="to-about" to="/about">\n        about\n      </Link>\n      {showError ? (\n        <div id="error-show-client">error only in client for test</div>\n      ) : null}\n    </div>\n  );\n};\n')),(0,n.kt)("p",null,"This component is isomorphic and will handle both server and client errors."),(0,n.kt)("p",null,"This page will be displayed if any errors are thrown during the initial rendering on the server side."),(0,n.kt)("p",null,"On the client side, when a rendering error occurs, the built-in errorBoundary will display this error page. This error page will also be displayed when the ",(0,n.kt)("inlineCode",{parentName:"p"},"loader")," throws an unexpected error."),(0,n.kt)("h2",{id:"error-component-props"},"Error Component Props"),(0,n.kt)("h3",{id:"errorcode"},"errorCode"),(0,n.kt)("p",null,"type: ",(0,n.kt)("inlineCode",{parentName:"p"},"string | undefined")),(0,n.kt)("p",null,"http status code of the error. Used in server side."),(0,n.kt)("p",null,"At client side, ",(0,n.kt)("inlineCode",{parentName:"p"},"errorCode")," is always ",(0,n.kt)("inlineCode",{parentName:"p"},"undefined"),"."),(0,n.kt)("h4",{id:"errordesc"},"errorDesc"),(0,n.kt)("p",null,"type: ",(0,n.kt)("inlineCode",{parentName:"p"},"string | undefined")),(0,n.kt)("p",null,"A brief description of the error shown to users."),(0,n.kt)("p",null,"Please note this is not ",(0,n.kt)("inlineCode",{parentName:"p"},"error.message"),"."),(0,n.kt)("p",null,"Default value:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"server side: ",(0,n.kt)("inlineCode",{parentName:"li"},"'Internal Server Error'")),(0,n.kt)("li",{parentName:"ul"},"client side: ",(0,n.kt)("inlineCode",{parentName:"li"},"'Internal Application Error'"))),(0,n.kt)("p",null,"You can customize ",(0,n.kt)("inlineCode",{parentName:"p"},"errorDesc")," by actively returning an ",(0,n.kt)("a",{parentName:"p",href:"/shuvijs.org/docs/guides/Data%20Fetching/#error-response"},"Error Response")," at the ",(0,n.kt)("inlineCode",{parentName:"p"},"loader"),"."),(0,n.kt)("h4",{id:"error"},"error"),(0,n.kt)("p",null,"type: ",(0,n.kt)("inlineCode",{parentName:"p"},"Error | undefined")),(0,n.kt)("p",null,"The error object. If you want to display the detail info of the error, you can use this prop."),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"error")," props is only available at client side when catching errorBoundary or unexpected ",(0,n.kt)("inlineCode",{parentName:"p"},"loader")," errors."))}c.isMDXComponent=!0}}]);